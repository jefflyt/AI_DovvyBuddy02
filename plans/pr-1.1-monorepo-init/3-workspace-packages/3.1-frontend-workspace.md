# Step 3.1: Create Frontend Workspace Package

**Part of:** Step 3 from plan.md  
**Focus:** Create frontend package.json, tsconfig.json, and .env.local.example  
**Files to Create:**
- `src/frontend/package.json`
- `src/frontend/tsconfig.json`
- `src/frontend/.env.local.example`

**Estimated Time:** 15 minutes

## Overview

This substep creates the frontend workspace with Next.js-specific configuration, TypeScript settings that extend the root config, and environment variable templates for client-side configuration.

## Pre-Substep Checklist

- [ ] **Branch:** Working on `1.1-monorepo-init`
- [ ] **Prior Step:** Completed Step 2 (Linting & Formatting configured)
- [ ] **Folder Status:** `src/frontend/` exists (only `.gitkeep` inside)

## Implementation

### Goal
Set up frontend workspace as a Next.js 14 application with TypeScript and environment variables.

### Step-by-Step Instructions

#### Step 1: Create Frontend package.json
- [ ] Remove `.gitkeep` from `src/frontend/`:

```bash
rm src/frontend/.gitkeep
```

- [ ] Create `src/frontend/package.json`:

```json
{
  "name": "@dovvydive/frontend",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "type-check": "tsc --noEmit"
  },
  "dependencies": {
    "next": "^14.1.0",
    "react": "^18.2.0",
    "react-dom": "^18.2.0",
    "zustand": "^4.5.0",
    "axios": "^1.6.5"
  },
  "devDependencies": {
    "@types/node": "^20.11.5",
    "@types/react": "^18.2.48",
    "@types/react-dom": "^18.2.18",
    "autoprefixer": "^10.4.17",
    "postcss": "^8.4.33",
    "tailwindcss": "^3.4.1"
  }
}
```

#### Step 2: Create Frontend tsconfig.json
- [ ] Create `src/frontend/tsconfig.json`:

```json
{
  "extends": "../../tsconfig.json",
  "compilerOptions": {
    "target": "ES2022",
    "lib": ["DOM", "DOM.Iterable", "ES2022"],
    "jsx": "preserve",
    "module": "ESNext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "allowJs": true,
    "noEmit": true,
    "incremental": true,
    "esModuleInterop": true,
    "isolatedModules": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "baseUrl": ".",
    "paths": {
      "@/*": ["./*"],
      "@shared/*": ["../shared/*"],
      "@shared": ["../shared/index.ts"]
    }
  },
  "include": [
    "next-env.d.ts",
    "**/*.ts",
    "**/*.tsx",
    ".next/types/**/*.ts"
  ],
  "exclude": [
    "node_modules",
    ".next",
    "out"
  ]
}
```

#### Step 3: Create Frontend Environment Template
- [ ] Create `src/frontend/.env.local.example`:

```bash
# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:3001/api/v1

# Google Maps API Key (client-side)
NEXT_PUBLIC_GOOGLE_MAPS_KEY=your_google_maps_api_key_here

# Application Environment
NEXT_PUBLIC_APP_ENV=development

# Feature Flags (optional)
NEXT_PUBLIC_ENABLE_CHAT=true
NEXT_PUBLIC_ENABLE_MAPS=true
```

#### Step 4: Install Frontend Dependencies
- [ ] Run npm install from the root to link the workspace:

```bash
npm install
```

This will install Next.js and related dependencies into `src/frontend/node_modules`

## Verification Checklist

- [ ] File created: `src/frontend/package.json`
- [ ] File created: `src/frontend/tsconfig.json`
- [ ] File created: `src/frontend/.env.local.example`
- [ ] `npm install` completed successfully
- [ ] `src/frontend/node_modules` folder exists
- [ ] Workspace linked: `npm ls @dovvydive/frontend --depth=0` shows the package

## Troubleshooting

| Issue | Solution |
|-------|----------|
| `npm install` fails with workspace errors | Ensure root `package.json` has workspaces array including `src/frontend` |
| Next.js dependencies not installing | Check internet connection; try `npm cache clean --force` then retry |
| TypeScript extends error | Ensure `../../tsconfig.json` path is correct relative to frontend folder |
| Path aliases not resolving | Verify `baseUrl` and `paths` in tsconfig match the folder structure |

## Files Modified

- [ ] ✅ Created: `src/frontend/package.json`
- [ ] ✅ Created: `src/frontend/tsconfig.json`
- [ ] ✅ Created: `src/frontend/.env.local.example`
- [ ] ✅ Removed: `src/frontend/.gitkeep`

## What Comes Next

- Next substep: Step 3.2 - Create Backend workspace package
- Frontend workspace is now configured; Next.js app scaffolding will come in PR 1.5
