# Step 1.1: Create Root package.json with Workspace Configuration

**Part of:** Step 1 from plan.md  
**Focus:** Initialize root package.json with npm workspaces configuration  
**File to Create:** `package.json` (root)  
**Estimated Time:** 10 minutes

## Overview

This substep creates the foundational package.json file that orchestrates the entire monorepo. It defines three workspaces (frontend, backend, shared) and installs all shared development dependencies needed for TypeScript, ESLint, and Prettier across the project.

## Pre-Substep Checklist

- [ ] **Branch:** Working on `1.1-monorepo-init`
- [ ] **Current Step:** First substep (no prior dependencies)
- [ ] **Node Version:** Node.js 20+ installed (`node --version`)
- [ ] **Location:** At project root `/Users/jefflee/Documents/AIProjects/AI_DovvyBuddy02`

## Implementation

### Goal
Create root package.json with npm workspaces configuration and install all shared dev dependencies.

### Step-by-Step Instructions

#### Step 1: Create Root package.json
- [ ] Ensure you're in the project root directory
- [ ] Copy and paste the following content into `package.json` at the root:

```json
{
  "name": "dovvydive-monorepo",
  "version": "0.1.0",
  "private": true,
  "description": "DovvyDive - AI-Powered Dive Trip Planner",
  "workspaces": [
    "src/frontend",
    "src/backend",
    "src/shared"
  ],
  "scripts": {
    "lint": "eslint . --ext .ts,.tsx,.js,.jsx",
    "lint:fix": "eslint . --ext .ts,.tsx,.js,.jsx --fix",
    "format": "prettier --write \"**/*.{ts,tsx,js,jsx,json,md,yml,yaml}\"",
    "format:check": "prettier --check \"**/*.{ts,tsx,js,jsx,json,md,yml,yaml}\"",
    "type-check": "npm run type-check --workspaces --if-present",
    "clean": "rm -rf node_modules src/*/node_modules",
    "clean:build": "rm -rf src/**/dist src/**/.next src/**/build"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^6.21.0",
    "@typescript-eslint/parser": "^6.21.0",
    "eslint": "^8.56.0",
    "eslint-config-next": "^14.1.0",
    "eslint-config-prettier": "^9.1.0",
    "prettier": "^3.2.5",
    "typescript": "^5.3.3"
  },
  "engines": {
    "node": ">=20.0.0",
    "npm": ">=10.0.0"
  }
}
```

#### Step 2: Install Dependencies
- [ ] Run the following command in the terminal:

```bash
npm install
```

- [ ] Wait for installation to complete (should take 30-60 seconds)
- [ ] Verify `node_modules` folder is created at the root

#### Step 3: Verify Installation
- [ ] Check TypeScript is installed:

```bash
npx tsc --version
```

Expected output: `Version 5.3.3` (or similar)

- [ ] Check ESLint is installed:

```bash
npx eslint --version
```

Expected output: `v8.56.0` (or similar)

- [ ] Check Prettier is installed:

```bash
npx prettier --version
```

Expected output: `3.2.5` (or similar)

## Verification Checklist

- [ ] File saved in correct location: `package.json` (at project root)
- [ ] `node_modules` directory exists at root
- [ ] All three tools verified: TypeScript, ESLint, Prettier
- [ ] No installation errors in terminal output
- [ ] `package-lock.json` generated automatically

## Troubleshooting

| Issue | Solution |
|-------|----------|
| `ENOENT: no such file or directory` | Ensure you're running commands from project root, not a subdirectory |
| `npm ERR! code ERESOLVE` | Clear npm cache: `npm cache clean --force`, then retry `npm install` |
| Node version mismatch | Update to Node 20+: `nvm install 20` or download from nodejs.org |
| Permission errors on Linux/Mac | Use `sudo npm install` or fix npm permissions: https://docs.npmjs.com/resolving-eacces-permissions-errors |
| Workspace folders don't exist yet | This is expected - workspaces will be created in Step 3 |

## Files Modified

- [ ] ✅ Created: `package.json` (root)
- [ ] ✅ Generated: `package-lock.json` (root)
- [ ] ✅ Generated: `node_modules/` (root)

## What Comes Next

- Next substep: Step 1.2 - Create base tsconfig.json
- This establishes the workspace structure; actual workspace folders created in Step 3
