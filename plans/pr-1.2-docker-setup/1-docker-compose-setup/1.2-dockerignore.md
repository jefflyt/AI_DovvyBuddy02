# Step 1.2: Create .dockerignore

**Objective:** Optimize Docker build context by excluding unnecessary files

## Files to Create

- `.dockerignore` (root of project)

## Implementation

### Step-by-Step Instructions

#### Step 1: Create .dockerignore

Create a new file at the root of the project:

```
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*
package-lock.json

# Build outputs
dist/
build/
.next/
out/
*.tsbuildinfo

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# IDE files
.vscode/
.idea/
*.swp
*.swo
*~
.DS_Store

# Version control
.git/
.gitignore
.gitattributes

# Documentation
*.md
!README.md
docs/

# Test files
coverage/
.nyc_output/
*.test.ts
*.spec.ts
__tests__/
__mocks__/

# Logs
logs/
*.log

# Temporary files
tmp/
temp/
.cache/

# Docker files (no need to copy into container)
Dockerfile*
docker-compose*.yml
.dockerignore

# CI/CD
.github/
.gitlab-ci.yml
.travis.yml

# OS files
Thumbs.db
Desktop.ini
```

**Purpose of .dockerignore:**

While this PR doesn't build custom Docker images, establishing `.dockerignore` now prevents future issues when:
- PR 7.6 adds Dockerfiles for backend deployment
- Multi-stage builds need optimized contexts
- CI/CD pipelines build images

**Key Exclusions Explained:**

- **node_modules/**: Largest directory, always installed fresh in container
- **Build outputs**: Generated during container build, not copied from host
- **.env files**: Sensitive data should never be in Docker images
- **.git/**: Version control not needed in containers
- **IDE files**: Developer-specific, not needed in production

## Verification Steps

### 1. Verify File Created

```bash
ls -la .dockerignore
```

Expected output:
```
-rw-r--r--  1 user  staff  XXX Dec  1 12:00 .dockerignore
```

### 2. Test Docker Context Size (Optional)

Check what files Docker would include in build context:

```bash
# Show files that would be sent to Docker daemon
docker build --dry-run -f - . < /dev/null
```

With `.dockerignore`, the context should exclude `node_modules/` and other large directories.

### 3. Verify Exclusions Work

Create a test Dockerfile to verify:

```bash
# Create temporary Dockerfile
cat > Dockerfile.test <<'EOF'
FROM alpine:latest
COPY . /test
RUN ls -la /test
EOF

# Build and check (should NOT see node_modules, .git, etc.)
docker build -f Dockerfile.test -t test-context .

# Clean up
rm Dockerfile.test
docker rmi test-context
```

## Troubleshooting

| Issue | Cause | Solution |
|-------|-------|----------|
| .dockerignore not working | File encoding issue | Ensure file is UTF-8, no BOM |
| Still seeing excluded files | Docker cache | Run: `docker system prune -a` to clear cache |
| Pattern not matching | Incorrect glob syntax | Use `**/pattern` for recursive matches |

## Success Criteria

- ✅ `.dockerignore` file exists at project root
- ✅ File includes all major exclusions (node_modules, .env, .git, build outputs)
- ✅ File uses correct glob patterns
- ✅ Comments explain purpose of each section

## Notes

- **Future-Proofing:** This file will be used in PR 7.6 when building backend Docker images for deployment
- **Context Size:** Proper `.dockerignore` can reduce Docker context from ~500MB to ~5MB
- **Security:** Excluding `.env` files prevents accidental secret leakage into images
- **Performance:** Smaller context = faster builds and image uploads

## Next Step

Proceed to **Step 2: Database Initialization Scripts** (create init scripts directory and SQL file).
